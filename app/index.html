<!DOCTYPE html>
<html ng-app="myApp" lang="en">
  <head>
    <meta charset="utf-8">
    <title>9Touhou - jubeat Saucer Season 3 Tournament Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    
    <!-- Le styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/additional.css" rel="stylesheet">
    <link href="css/angular-ui.min.css" rel="stylesheet">
    <link href="css/bootstrap-responsive.css" rel="stylesheet">
    <link href="css/jquery-ui-1.10.2.custom.min.css" rel="stylesheet">
    <link href="css/spacelab/bootswatch.less" rel="stylesheet/less">
    <link href="css/spacelab/variables.less" rel="stylesheet/less">
    
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
    
    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
    <link rel="shortcut icon" href="ico/favicon.png">
    
    <script type="text/javascript">
      
      function song_upload(){
        sg_upload = window.open("/songform", "_blank", "location=no,menubar=no,resizable=no,width=480,height=300"); 
        sg_upload.focus();
      }
      
      function submission_upload(purpose){
        sn_upload = window.open("/blobform/" + purpose, "_blank", "location=no,menubar=no,resizable=no,width=480,height=300"); 
        sn_upload.focus();
      }
      
      function mission_upload(purpose){
        sn_upload = window.open("/missionform/" + purpose, "_blank", "location=no,menubar=no,resizable=no,width=480,height=300"); 
        sn_upload.focus();
      }
      
      function achievement_upload(){
        sn_upload = window.open("/achievementform", "_blank", "location=no,menubar=no,resizable=no,width=480,height=300"); 
        sn_upload.focus();
      }      
      
      var hasPlayed = false;
      
      function troll(id) {
        var chance = Math.random();
        if (chance <= 0.25) {
          scope = angular.element(document.getElementById(id)).scope();
          scope.$apply(function(){
            scope.do_troll(id);
          })
        }
      }
      
      function untroll() {
        scope = angular.element(document.getElementById('main')).scope();
        scope.$apply(function(){
          scope.reset_troll();
        })
      }
            
      function spark() {
        scope = angular.element(document.getElementById('main')).scope();
        scope.$apply(function(){
          scope.toggle();
        })
      }
    </script>
  </head>
  
  <body ng-controller="FirstController">
    <!--Navbar-->
    <div id="topbar" class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">

          <a class="brand" href="index.html" ng-cloak>{{company}}</a>
          
          <p class="navbar-text pull-right">
            Hello, <a href="#" class="navbar-link" ng-cloak>{{name}}</a>
            <button class="btn btn-inverse btn-small" data-toggle="modal" href="#Login" ng-show="name=='BAKA'" ng-cloak>Login</button>
            <button class="btn btn-inverse btn-small" data-toggle="modal" href="#Register" ng-show="name=='BAKA'" ng-cloak>Register</button>
            <span ng-show="isadmin==true" ng-cloak> (Admin)</span>
            <button class="btn btn-inverse btn-small" ng-hide="name=='BAKA'" ng-click="logout()" ng-cloak>Logout</button>
          </p>
        </div>
      </div>
    </div>
    
    <!--Login Modal-->
    <div class="modal hide fade" id="Login" style="display:none">
      <div class="modal-header">
        <input type="submit" class="close" value="x" data-dismiss="modal"/>
        <h3 id="Login">Login</h3>
      </div>
      <div class="modal-body">
        <div class="control-group">
          <label class="control-label" for="UserName">Username</label>
          <div class="controls">
            <input type="text" ng-model="login.data.u_name" id="username"/>
          </div>
          <label class="control-label" for="PassWord">Password</label>
          <div class="controls">
            <input type="password" ng-model="login.data.u_pwd" id="password"/>
          </div>
          <div class="controls">
            <input type="submit" ng-click="getlogin()" value="Submit" data-dismiss="modal"/>
          </div>
        </div>			
      </div>
      <div class="modal-footer"></div>
    </div>
    
    <!--Registration Modal-->
    <div class="modal hide fade" id="Register" style="display:none">
      <div class="modal-header">
        <input type="submit" class="close" value="x" data-dismiss="modal"/>
        <h3 id="Register">Register</h3>
      </div>
      <div class="modal-body">
        <div class="control-group">
          <label class="control-label" for="UserName">Username</label>
          <div class="controls">
            <input type="text" ng-model="login.data.u_name" id="username"/>
          </div>
          <label class="control-label" for="PassWord">Password</label>
          <div class="controls">
            <input type="password" ng-model="login.data.u_pwd" id="password"/>
          </div>
          <div class="controls">
            <input type="submit" ng-click="registerlogin()" value="Submit" data-dismiss="modal"/>
          </div>
        </div>					
      </div>
      <div class="modal-footer"></div>
    </div>
    
    <!-- Main Body -->
    <div class="container-fluid" id="main">
      <div id="LoadingDiv" ng-hide="waiting=='Ready'"></div>
      <div class="modal" id="Loading" ng-hide="waiting=='Ready'">
        <div class="modal-body">
          <span>Loading........</span>
        </div>
      </div>      
      <div class="spark" ng-show="spark" ng-cloak ng-animate="{show: 'masterspark-show'}" style="top: {{beam_height}}px"></div>
      <div class="row-fluid" id="wrap">
        <!-- Navigation Sidebar (Access separate panes). -->
        <div class="span3">
          <audio id="yoink">
            <source src="./sfx/sounds/yoink-Public_D-362_hifi.mp3" type="audio/mpeg"></source>
            <source src="./sfx/sounds/yoink-Public_D-362_hifi.wav" type="audio/wav"></source>
          </audio>
          <audio id="splode">
            <source src="./sfx/sounds/Explosio-Diode111-8778_hifi.mp3" type="audio/mpeg"></source>
            <source src="./sfx/sounds/Explosio-Diode111-8778_hifi.wav" type="audio/wav"></source>
          </audio>
          <audio id="charged">
            <source src="./sfx/sounds/078.mp3" type="audio/mpeg"></source>
            <source src="./sfx/sounds/078.wav" type="audio/wav"></source>
          </audio>
          <audio id="spark">
            <source src="./sfx/sounds/spark.mp3" type="audio/mpeg"></source>
            <source src="./sfx/sounds/spark.wav" type="audio/wav"></source>
          </audio>
          <div class="well sidebar-nav sidebar-nav-fixed" id="sidenav">
            <ul class="nav nav-list">
              <li class="nav-header">
                <button class="btn btn-inverse btn-small" title="Give Me Back My Sidebar!" onClick="untroll()" ng-cloak ng-show="reset">
                  <span>Dammit, </span>Marisa...
                </button>
                <button class="btn btn-success btn-small" title="DO IT" ng-click="toggle()" ng-cloak ng-show="charge == 100">
                  MASTER SPARK
                </button>
                <span>Navigation</span>
              </li>
              <li class="nav-header" ng-cloak>
                  <span class="label">Marisa Pwned: {{pwned}}</span>
                  <br/>
                  <div  class="progress progress-striped active" ng-class="progress">
                    <div class="bar" style="width: {{charge}}%"></div>
                  </div>
                  {{bork}}
              </li>
              <li class="active">
                <a id="mp" href="#MainPage" data-toggle="tab" ng-click="do_troll('mp', $event)" ng-show="marisa['mp']">
                  <div class="ico" ng-class="marisa_status"></div> 
                  <span>Main Page</span>
                </a>
              </li>
              <li>
                <a id="cc" href="#CurrentChallenges" data-toggle="tab" ng-click="do_troll('cc', $event)"ng-show="marisa['cc']">
                  <div class="ico" ng-class="marisa_status"></div> 
                  <span>Current Challenges</span>
                </a>
              </li>
              <li>
                <a id="cr" href="#CurrentRanking" data-toggle="tab" ng-click="do_troll('cr', $event)"ng-show="marisa['cr']">
                  <div class="ico" ng-class="marisa_status"></div> 
                  <span>Current Ranking</span>
                </a>
              </li>
              <li>
                <a id="mr" href="#MyProfile" ng-hide="(name=='BAKA' || marisa['mr']==false)" data-toggle="tab" ng-cloak ng-click="do_troll('mr', $event)">
                  <div class="ico" ng-class="marisa_status"></div> 
                  <span>My Profile</span>
                </a>
              </li>
              <li class="nav-header">Missions</li>
              <li>
              <li>
                <a id="mim" href="#MissionMarisa" data-toggle="tab" ng-click="do_troll('mim', $event)"ng-show="marisa['mim']">
                  <div class="ico" ng-class="marisa_status"></div> 
                  <span>Marisa's Mission</span>
                </a>
              </li>
              <li>
                <a id="mic" href="#MissionCirno" data-toggle="tab" ng-click="do_troll('mic', $event)"ng-show="marisa['mic']">
                  <div class="ico" ng-class="marisa_status"></div> 
                  <span>Cirno's Mission (Under Construction)</span>
                </a>
              </li>
              <li class="nav-header" ng-show="isadmin==true" ng-cloak>Admin Console</li>
              <li>
                <a id="mn" href="#ManageAnnouncements" ng-show="(isadmin==true && marisa['mn'] == true)" data-toggle="tab" ng-cloak ng-click="do_troll('mn', $event)">
                  <div class="ico" ng-class="marisa_status"></div> 
                  <span>Manage Announcements/News (Under Construction)</span>
                </a>
              </li>
              <li>
                <a id="mm" href="#ManageMissions" ng-show="(isadmin==true && marisa['mm'] == true)" data-toggle="tab" ng-cloak ng-click="do_troll('mm', $event)">
                  <div class="ico" ng-class="marisa_status"></div> 
                  <span>Manage Missions (Under Construction)</span>
                </a>
              </li>
              <li>
                <a id="mu" href="#ManageUsers" ng-show="(isadmin==true && marisa['mu'] == true)" data-toggle="tab" ng-cloak ng-click="do_troll('mu', $event)">
                  <div class="ico" ng-class="marisa_status"></div> 
                  <span>Manage Users</span>
                </a>
              </li>
              <li>
                <a id="mc" href="#ManageChallenges" ng-show="(isadmin==true && marisa['mc'] == true)" data-toggle="tab" ng-cloak ng-click="do_troll('mc', $event)">
                  <div class="ico" ng-class="marisa_status"></div> 
                  <span>Manage Challenges</span>
                </a>
              </li>
              <li>
                <a id="ma" href="#ManageAchievements" ng-show="(isadmin==true && marisa['ma'] == true)" data-toggle="tab" ng-cloak ng-click="do_troll('ma', $event)">
                  <div class="ico" ng-class="marisa_status"></div> 
                  <span>Manage Achievements</span>
                </a>
              </li>
              <li>
                <a id="ms" href="#ManageSongs" ng-show="(isadmin==true && marisa['ms'] == true)" data-toggle="tab" ng-cloak ng-click="do_troll('ms', $event)">
                  <div class="ico" ng-class="marisa_status"></div> 
                  <span>Manage Songs</span>
                </a>
              </li>
              <li>
                <a id="vs" href="#ViewSubmissions" ng-show="(isadmin==true && marisa['vs'] == true)" data-toggle="tab" ng-cloak ng-click="do_troll('vs', $event)">
                  <div class="ico" ng-class="marisa_status"></div> 
                  <span>View Submissions</span>
                </a>
              </li>
              <li>
                <a id="vl" href="#ViewLogs" ng-show="(isadmin==true && marisa['vl'] == true)" data-toggle="tab" ng-cloak ng-click="do_troll('vl', $event)">
                  <div class="ico" ng-class="marisa_status"></div> 
                  <span>View Logs</span>
                </a>
              </li>
            </ul>
          </div><!--/.well -->
        </div><!--/span-->
        
        <!-- Main Body -->
        <div class="span9">
          
          <!-- Panes -->
          <div class="tab-content">
            
            <!-- Main Page Pane -->
            <div class="tab-pane active" id="MainPage">
                <div class="container-fluid">
                  <div id="myCarousel" class="carousel slide">
                    <div class="carousel-inner">
                      <div class="item active">
                        <div class="container-fluid">
                          <div class="row-fluid">
                            <div class="span5">
                              <div class="well">
                                <img src="./img/jubeat-saucer.jpg" alt="">
                              </div>
                            </div>
                            <div class="span7">
                              <div class="carousel-caption">
                                <h1 ng-cloak>Hello, {{name}}!</h1>
                                <p class="lead">Welcome to the 9Touhou jubeat Saucer Season 3 contest page!</p>
                                <p>There will be weekly site maintenance on Wednesdays from 1000 hrs till 1600 hrs (UTC +0800).</p>
                              </div>
                            </div>  
                          </div>
                        </div>
                      </div>
                      <!-- Announcements will go here -->
                      <div class="item">
                        <div class="container-fluid" ng-cloak>
                          <div class="row-fluid">
                            <div class="span5">
                              <div class="well">
                                <img id="food" src="./img/Game_On.jpg" alt="">
                              </div>
                            </div>
                            <div class="span7">
                              <div class="carousel-caption">
                                <h1>Four People, One Table...</h1>
                                <p class="lead">Let's Play <em>Mahjong</em>!</p>
                                <br/>
                                <p>
                                  <span style="font-style:italic">
                                  </span>
                                </p>
                              </div>
                            </div>  
                          </div>
                        </div>
                      </div>               
                      <!--div ui-if="!!challenges.entities.length"-->
                      <div class="item" ng-repeat="chal in challenges.entities | filter:activeChallenge" ng-cloak>
                        <div class="container-fluid">
                          <div class="row-fluid">
                            <div class="span5">
                              <div class="well">                               
                                <img ui-if="!!chal.c_songs.length" src="/file/serve/{{chal.c_songs[0].s_blob}}" alt="./img/jubeat-saucer.jpg">
                                <img ui-if="!chal.c_songs.length" src="./img/jubeat-saucer.jpg">
                              </div>
                            </div>
                            <div class="span7">
                              <div class="carousel-caption">
                                <h1>{{chal.c_name}}</h1>
                                <p>{{chal.c_desc}}</p>
                                <div ui-if="!!chal.c_songs.length">
                                    <ul>
                                      <li ng-repeat="cs in chal.c_songs">
                                      <span>{{cs.s_name}} ({{cs.s_difficulty}})</span>
                                      </li>
                                    </ul>
                                </div>
                                <div ng-hide="expireChallenge(chal)">
                                  <p id="c{{chal.id}}" class="lead">
                                    Expires: {{chal.c_date}}
                                  </p>
                                  <button class="btn btn-inverse"  onclick="submission_upload({{chal.id}})"  ng-hide="name=='BAKA'" ng-cloak>Submit Files</button>
                                </div>
                                <div ng-show="expireChallenge(chal)">
                                  Expired
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!--/div-->    
                    </div>
                    <a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a>
                    <a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a>
                  </div>
                </div>
                <div class="row-fluid marketing">
                  <div class="span4">
                    <h2>About 9Touhou</h2>
                    <p>Coming soon........</p>
                    <p><a class="btn btn-inverse btn-small" href="#">View more &raquo;</a></p>
                  </div><!--/span-->
                  <div class="span4">
                    <h2>Top Scorers</h2>
                    <ol>
                      <li ng-repeat="user in users.entities | orderBy:'-u_points' | filter:userRanking | limitTo: 3" ng-cloak>
                        {{user.u_name}} ({{user.u_points}})
                      </li>
                    </ol>
                  </div><!--/span-->
                  <div class="span4">
                    <h2>Latest News</h2>
                    <ul>
                      <li>
                        Coming soon........
                      </li>
                    </ul>
                  </div><!--/span-->
                </div><!--/row-->
            </div>
            
            <!-- Current Challenges Pane -->
            <div class="tab-pane" id="CurrentChallenges">
              <div class="container-fluid">
                <table class="table table-striped">
                  <thead>
                    <th>
                      Challenge Name
                    </th>
                    <th>
                      Description
                    </th>
                    <th>
                      Songs
                    </th>
                    <th>
                      Expires
                    </th>
                    <th>
                      Action
                    </th>
                  </thead>
                  <tbody ui-if="!!challenges.entities.length">
                        <tr ng-repeat="chal in challenges.entities">
                          <td>
                            {{chal.c_name}}
                          </td>
                          <td>
                            {{chal.c_desc}}
                          </td>
                          <td>
                            <div ui-if="!!chal.c_songs">
                                <ul>
                                  <li ng-repeat="cs in chal.c_songs">
                                    <img src="/file/serve/{{cs.s_blob}}" style="width: 100px">
                                    <span>{{cs.s_name}} ({{cs.s_difficulty}})</span>
                                  </li>
                                </ul>
                            </div>
                          </td>
                          <td ng-hide="expireChallenge(chal)">
                            {{chal.c_date}}
                          </td>
                          <td ng-hide="expireChallenge(chal)">
                            <button class="btn btn-inverse btn-small"  onclick="submission_upload({{chal.id}})"  ng-hide="name=='BAKA'" ng-cloak>Submit Files</button>
                          </td>
                          <td ng-show="expireChallenge(chal)" ng-cloak>
                            Expired
                          </td>
                          <td ng-show="expireChallenge(chal)" ng-cloak>
                            -
                          </td>
                        </tr>
                  </tbody>
                </table>
              </div>	          	
            </div>
            
            <!-- My Profile Pane -->
            <div class="tab-pane" id="MyProfile">
              <div class="well" ng-show="name=='BAKA'">
                <h1>My Profile</h1>
                <p>You have to be logged in to view your profile!</p>
              </div>
              <div class="well" ng-hide="name=='BAKA'">
                <h1>{{name}}</h1>
                <h3>Points Acquired: {{points}}</h3>
                <div class="row-fluid">
                  <div class="span6">
                    <h3>Achievements Unlocked:</h3>
                    <button class="btn btn-inverse btn-small" ng-click="listachievementsusers()" ng-cloak>Refresh</button>
                    <button class="btn btn-inverse btn-small"  onclick="achievement_upload()"  ng-hide="name=='BAKA'" ng-cloak>Submit Files For Achievements</button>
                    <table class="table table-striped">
                      <thead>
                        <th>
                          Achievement Name
                        </th>
                        <th>
                          Points Awarded
                        </th>
                        <th>
                          Status/Action
                        </th>
                      </thead>
                      <tbody ui-if="!!achievements.entities.length">
                        <tr ng-repeat="achievement in achievements.entities">
                          <td>
                            {{achievement.a_name}}
                          </td>
                          <td>
                            {{achievement.a_points}}
                          </td>
                          <td>
                            <span class="badge" ng-repeat="award in achievementawards.entities | filter:{a_id : achievement.id, a_user : name}">
                            DONE
                            </span>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <div class="span6">
                    <h3>Notifications</h3>
                    <button class="btn btn-inverse btn-small" ng-click="listnotifications()" ng-cloak>Refresh</button> 
                    <table class="table table-striped">
                      <thead>
                        <th>
                          Date
                        </th>
                        <th>
                          Notification
                        </th>
                      </thead>
                      <tbody ui-if="!!notifications.entities.length">
                        <tr ng-repeat="notification in notifications.entities">
                          <td>
                            {{notification.n_date}}
                          </td>
                          <td>
                            {{notification.n_msg}}
                          </td>
                        </tr>
                      </tbody>
                    </table>                      
                  </div>
                </div>
              </div>
            </div>
            
            
            <!-- Current Ranking Pane -->
            <div class="tab-pane" id="CurrentRanking">
              <div class="container-fluid">
                <table class="table table-striped">
                  <thead>
                    <th>
                      Username
                    </th>
                    <th>
                      Points
                    </th>
                  </thead>
                  <tbody ui-if="!!users.entities.length">
                        <tr ng-repeat="user in users.entities | orderBy:'-u_points' | filter:userRanking">
                          <td>
                            {{user.u_name}}
                          </td>
                          <td>
                            {{user.u_points}}
                          </td>
                        </tr>
                  </tbody>
                </table>
              </div>	 	        	
            </div>
            
            <!-- Missions Pane (Marisa) -->
            <div class="tab-pane" id="MissionMarisa">
              <div>
                <figure class="fluidratio">
                  <div class="mission">
                    <div class="mission-row">
                      <h1><span>Marisa's Mission: <a href="http://youtu.be/TSItKJXZdBQ" target="_blank">Tanking The Incredible Hand!</a></span></h1>
                      <p><span>Many things have trickled in from the Outside World, and the game of <em>mahjong</em> is no exception. Said game has enjoyed explosive popularity since its introduction to Gensokyo, with humans and <em>youkai</em> alike spending the warm summer nights on this exciting new pasttime.</span></p>
                      <p><span>Unfortunately, there is one person that is ruining everyone's fun - Marisa Kirisame, ordinary magician.</span></p>
                      <p><span>Marisa enjoys the game, the excitement, and the gambled treasures. <em>And she will stop at nothing to ensure victory.</em></span></p>
                      <p><span>Can anyone break Marisa's <span style="text-decoration:line-through">winning</span> cheating streak? Or will she steal <em>all</em> of the precious things?</span></p>
                    </div>
                    
                    <div class="mission-row">
                      <h3><span>Instructions</span></h3>
                      <p><span>For this mission, you will have to create a <em>mahjong</em> hand to challenge one of the hands shown below. The score of your hand must <em>exceed that of Marisa's</em> in order for the mission to be considered cleared.</span></p>
                      <p><span>To create your hand, you have to "purchase" tiles by clearing certain songs - you wiil need to submit screenshots of the cleared songs as evidence to ensure that your tiles are legit.</span></p>
                      
                      <p><span>A list of the eligible songs (and the tiles they correspond to) can be found <a href="mahjong.html" target="_blank">here</a>.</span></p>
                      
                      <p><span>The number of tiles you can "purchase" depends on song difficulty and score ranking:</span></p>
                      
                      <div id="mission-table">
                        <table class="table">
                          <thead>
                            <tr>
                              <th>
                                Score Ranking/Modifier
                              </th>
                              <th>
                                No. of Tiles
                              </th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td>
                                S-Rank
                              </td>
                              <td>
                                1
                              </td>
                            </tr>
                            <tr>
                              <td>
                                SS-Rank
                              </td>
                              <td>
                                2
                              </td>
                            </tr>
                            <tr>
                              <td>
                                SSS-Rank
                              </td>
                              <td>
                                3
                              </td>
                            </tr>
                            <tr>
                              <td>
                                Full Combo
                              </td>
                              <td>
                                +1
                              </td>
                            </tr>
                            <tr>
                              <td>
                                Playing at ADV
                              </td>
                              <td>
                                -1
                              </td>
                            </tr>
                            <tr>
                              <td>
                                Playing at BSC
                              </td>
                              <td>
                                No tiles awarded
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <p>
                        <ul>
                          <li>
                            Scoring is based off Japanese <em>mahjong</em> rules (found <a href="http://en.wikipedia.org/wiki/Japanese_Mahjong_scoring_rules" target="_blank">here</a> and <a href="http://en.wikipedia.org/wiki/Japanese_Mahjong_yaku" target="_blank">here</a>).
                          </li>
                          <li>
                            Songs may be exchanged for any tile(s) in the set they belong to (e.g. an SS-rank on FLOWER EXT can be exchanged for any 2 bamboo tiles).
                          </li>
                          <li>
                            "Leftover" tiles may not be carried over to another hand (nice try).
                          </li>
                          <li>
                            Your hand may only have up to 4 of a particular tile (again, nice try).
                          </li>
                          <li>
                            For scoring purposes, assume that your hand is concealed (no discards used), won by a self-drawn tile, without declaring ready (i.e. <em>menzen tsumo</em>, no <em>riichi</em>). Assume that your hand is not waiting on any particular tile.
                          </li>
                        </ul>
                      </p>
                      <p><span style="color:red">This mission has been extended to Sunday, 15th September 2013 at 2300 hrs (UTC +0800).</span></p>
                    </div>
                    
                    <div class="mission-row">
                      <div class="row-fluid">
                        <div>
                          <h3><span>{{mission[0].title}}</span></h3>
                          <p>
                            <div class="well well-small">
                              <img src="./img/mahjong-tiles/MJt1.png" alt="">
                              <img src="./img/mahjong-tiles/MJt1.png" alt="">
                              <img src="./img/mahjong-tiles/MJt1.png" alt="">
                              <img src="./img/mahjong-tiles/MJw9.png" alt="">
                              <img src="./img/mahjong-tiles/MJw9.png" alt="">
                              <img src="./img/mahjong-tiles/MJw9.png" alt="">
                              <img src="./img/mahjong-tiles/MJs1.png" alt="">
                              <img src="./img/mahjong-tiles/MJs1.png" alt="">
                              <img src="./img/mahjong-tiles/MJs1.png" alt="">
                              <img src="./img/mahjong-tiles/MJs1.png" alt="">
                              <img src="./img/mahjong-tiles/MJw2.png" alt="">
                              <img src="./img/mahjong-tiles/MJw3.png" alt="">
                              <img src="./img/mahjong-tiles/MJw4.png" alt="">
                              <img src="./img/mahjong-tiles/MJs5.png" alt="">
                              <span style="padding-left: 1em;">&nbsp;</span>
                              <img src="./img/mahjong-tiles/MJs5.png" alt="">
                            </div>
                          </p>
                          <p><button class="btn btn-inverse btn-small"  onclick="mission_upload('{{mission[0].title}}')"  ng-hide="name=='BAKA'" ng-cloak>Submit Files</button></p>
                        </div>
                      </div>
                    </div>
                    
                    <div class="mission-row">
                      <div class="row-fluid">
                        <div>
                          <h3><span>{{mission[1].title}}</span></h3>
                          <p>
                            <div class="well well-small">
                              <img src="./img/mahjong-tiles/MJw1.png" alt="">
                              <img src="./img/mahjong-tiles/MJw1.png" alt="">
                              <img src="./img/mahjong-tiles/MJt9.png" alt="">
                              <img src="./img/mahjong-tiles/MJt9.png" alt="">
                              <img src="./img/mahjong-tiles/MJt1.png" alt="">
                              <img src="./img/mahjong-tiles/MJt1.png" alt="">
                              <img src="./img/mahjong-tiles/MJf1.png" alt="">
                              <img src="./img/mahjong-tiles/MJf1.png" alt="">
                              <img src="./img/mahjong-tiles/MJf2.png" alt="">
                              <img src="./img/mahjong-tiles/MJf2.png" alt="">
                              <img src="./img/mahjong-tiles/MJf3.png" alt="">
                              <img src="./img/mahjong-tiles/MJf3.png" alt="">
                              <img src="./img/mahjong-tiles/MJf4.png" alt="">
                              <img src="./img/mahjong-tiles/MJf4.png" alt="">
                            </div>
                          </p>
                          <p><button class="btn btn-inverse btn-small"  onclick="mission_upload('{{mission[1].title}}')"  ng-hide="name=='BAKA'" ng-cloak>Submit Files</button></p>
                        </div>
                      </div>
                    </div>
                    
                    <div class="mission-row">
                      <div class="row-fluid">
                        <div>
                          <h3><span>{{mission[2].title}}</span></h3>
                          <p>
                            <div class="well well-small">
                              <img src="./img/mahjong-tiles/MJs2.png" alt="">
                              <img src="./img/mahjong-tiles/MJs3.png" alt="">
                              <img src="./img/mahjong-tiles/MJs4.png" alt="">
                              <img src="./img/mahjong-tiles/MJs2.png" alt="">
                              <img src="./img/mahjong-tiles/MJs3.png" alt="">
                              <img src="./img/mahjong-tiles/MJs4.png" alt="">
                              <img src="./img/mahjong-tiles/MJs8.png" alt="">
                              <img src="./img/mahjong-tiles/MJs8.png" alt="">
                              <img src="./img/mahjong-tiles/MJs8.png" alt="">
                              <img src="./img/mahjong-tiles/MJs6.png" alt="">
                              <img src="./img/mahjong-tiles/MJs6.png" alt="">
                              <img src="./img/mahjong-tiles/MJd3.png" alt="">
                              <img src="./img/mahjong-tiles/MJd3.png" alt="">
                              <img src="./img/mahjong-tiles/MJd3.png" alt="">
                              <img src="./img/mahjong-tiles/MJd3.png" alt="">
                            </div>
                          </p>
                          <p><button class="btn btn-inverse btn-small"  onclick="mission_upload('{{mission[2].title}}')"  ng-hide="name=='BAKA'" ng-cloak>Submit Files</button></p>
                        </div>
                      </div>
                    </div>
                    
                    <div class="mission-row">
                      <div class="row-fluid">
                        <div>
                          <h3><span>{{mission[3].title}}</span></h3>
                          <p>
                            <div class="well well-small">
                              <img src="./img/mahjong-tiles/MJw1.png" alt="">
                              <img src="./img/mahjong-tiles/MJw9.png" alt="">
                              <img src="./img/mahjong-tiles/MJt9.png" alt="">
                              <img src="./img/mahjong-tiles/MJs1.png" alt="">
                              <img src="./img/mahjong-tiles/MJs1.png" alt="">
                              <img src="./img/mahjong-tiles/MJs9.png" alt="">
                              <img src="./img/mahjong-tiles/MJf1.png" alt="">
                              <img src="./img/mahjong-tiles/MJf2.png" alt="">
                              <img src="./img/mahjong-tiles/MJf3.png" alt="">
                              <img src="./img/mahjong-tiles/MJf4.png" alt="">
                              <img src="./img/mahjong-tiles/MJd1.png" alt="">
                              <img src="./img/mahjong-tiles/MJd2.png" alt="">
                              <img src="./img/mahjong-tiles/MJd3.png" alt="">
                              <span style="padding-left: 1em;">&nbsp;</span>
                              <img src="./img/mahjong-tiles/MJt1.png" alt="">
                            </div>
                          </p>
                          <p><button class="btn btn-inverse btn-small"  onclick="mission_upload('{{mission[3].title}}')"  ng-hide="name=='BAKA'" ng-cloak>Submit Files</button></p>
                        </div>
                      </div>
                    </div>
                    
                    <br/>
                    <br/>
                  </div>
                </figure>
              </div>
            </div>

            <!-- Missions Pane (Cirno) -->
            <div class="tab-pane" id="MissionCirno">
              <div>
                <figure class="fluidratio">
                  <div class="mission">
                    <div class="mission-row">
                      <h1><span>Cirno's Mission: <a href="http://youtu.be/5wFDWP5JwSM" target="_blank">The PERFECT Math Class!</a></span></h1>
                      <p>Under Construction</p>
                    </div>
                    
                    <div class="mission-row">
                      <h3><span>Instructions</span></h3>
                      <p>Under Construction</p>
                      <p><span style="color:red">This mission will end on to Monday, 30th September 2013 at 2300 hrs (UTC +0800).</span></p>
                    </div>
                    
                    <div class="mission-row">
                      <div class="row-fluid">
                      </div>
                    </div>
                    

                    <br/>
                    <br/>
                  </div>
                </figure>
              </div>
            </div>

            
            <!-- Manage Announcements/News Pane-->
            <div class="tab-pane" id="ManageAnnouncements" ui-if="isadmin">
              <div class="well">
                <h1>Manage Announcements/News</h1>
                <p class="lead">Hmmm, Announcements/News........</p>
              </div>
            </div>
            
            <!-- Manage Missions Pane-->
            <div class="tab-pane" id="ManageMissions" ui-if="isadmin">
              <div class="well">
                <h1>Current Mission (Marisa)</h1>
                <br/>
                <div class="row-fluid">
                  <div class="span6">
                    <h3>{{mission[0].title}}</h3>
                    <button class="btn btn-inverse btn-small" data-toggle="modal" href="#ScoreMission" ng-click="selected_mission=mission[0]" ng-cloak>Score "{{mission[0].title}}"</button>
                  </div>
                  <div class="span6">
                    <h3>{{mission[1].title}}</h3>
                    <button class="btn btn-inverse btn-small" data-toggle="modal" href="#ScoreMission" ng-click="selected_mission=mission[1]" ng-cloak>Score "{{mission[1].title}}"</button>
                  </div>
                </div>
                <div class="row-fluid">
                  <div class="span6">
                    <h3>{{mission[2].title}}</h3>
                    <button class="btn btn-inverse btn-small" data-toggle="modal" href="#ScoreMission" ng-click="selected_mission=mission[2]" ng-cloak>Score "{{mission[2].title}}"</button>
                  </div>
                  <div class="span6">
                    <h3>{{mission[3].title}}</h3>
                    <button class="btn btn-inverse btn-small" data-toggle="modal" href="#ScoreMission" ng-click="selected_mission=mission[3]" ng-cloak>Score "{{mission[3].title}}"</button>
                  </div>
                </div>
              </div>
              <br/>
              <div class="well">
                <h1>Past Mission (Mystia)</h1>
                <br/>
                <div class="row-fluid">
                  <div class="span6">
                    <h3>{{previous[0].title}}</h3>
                    <button class="btn btn-inverse btn-small" data-toggle="modal" href="#ScoreMission" ng-click="selected_mission=previous[0]" ng-cloak>Score "{{previous[0].title}}"</button>
                  </div>
                  <div class="span6">
                    <h3>{{previous[1].title}}</h3>
                    <button class="btn btn-inverse btn-small" data-toggle="modal" href="#ScoreMission" ng-click="selected_mission=previous[1]" ng-cloak>Score "{{previous[1].title}}"</button>
                  </div>
                </div>
                <div class="row-fluid">
                  <div class="span6">
                    <h3>{{previous[2].title}}</h3>
                    <button class="btn btn-inverse btn-small" data-toggle="modal" href="#ScoreMission" ng-click="selected_mission=previous[2]" ng-cloak>Score "{{previous[2].title}}"</button>
                  </div>
                  <div class="span6">
                    <h3>{{previous[3].title}}</h3>
                    <button class="btn btn-inverse btn-small" data-toggle="modal" href="#ScoreMission" ng-click="selected_mission=previous[3]" ng-cloak>Score "{{previous[3].title}}"</button>
                  </div>
                </div>
              </div>
              
              <div class="modal hide fade" id="ScoreMission" style="display:none">
                <div class="modal-header">
                  <input type="submit" class="close" value="x" data-dismiss="modal"/>
                  <h3 id="Login">Score Mission</h3>
                </div>
                <div class="modal-body">
                  <!-- <input type="hidden" ng-model="c_scoring.data.c_uploadby"> -->
                  <div class="control-group">
                    <label class="control-label" for="ChalName">Mission Name:</label>
                    <div class="controls">
                      {{selected_mission.title}}
                    </div>
                    <label class="control-label" for="ChalName">Points Awarded:</label>
                    <div class="controls">
                      {{selected_mission.points}}
                    </div>
                  </div>			
                </div>
                <div class="modal-footer">
                </div>
              </div>

              
            </div>
            
            <!-- Manage Users Pane-->
            <div class="tab-pane" id="ManageUsers" ui-if="isadmin">
              <div class="container-fluid">
                <button class="btn btn-inverse btn-small" ng-click="listusers()" ng-cloak>Refresh</button> 
                <table class="table table-striped">
                  <thead>
                    <th>
                      <a href="" ng-click="predicate_users = 'u_name'; reverse=false">Username</a>
                      (<a href ng-click="predicate_users = '-u_name'; reverse=false">^</a>)
                    </th>
                    <th>
                      <a href="" ng-click="predicate_users = 'u_admin'; reverse=!reverse">Is Admin?</a>
                    </th>
                    <th>
                      <a href="" ng-click="predicate_users = 'u_points'; reverse=!reverse">Points</a>
                    </th>
                    <th>
                      Action
                    </th>
                  </thead>
                  <tbody ui-if="!!users.entities.length">
                        <tr ng-repeat="user in users.entities | orderBy:predicate_users:reverse">
                          <td>
                            {{user.u_name}}
                          </td>
                          <td>
                            {{user.u_admin}}
                          </td>
                          <td>
                            {{user.u_points}}
                          </td>
                          <td>
                            -
                          </td>
                        </tr>
                  </tbody>
                </table>
              </div>	 	          	
            </div>
            
            <!-- Manage Challenge Pane -->
            <div class="tab-pane" id="ManageChallenges" ui-if="isadmin">
              <div class="container-fluid">
                <button class="btn btn-inverse btn-small" data-toggle="modal" href="#CreateChallenge" ng-cloak>Add New Challenge</button>
                <button class="btn btn-inverse btn-small" data-toggle="modal" href="#ScoreChallenge"  ng-cloak>Score Challenge</button>                 
                <button class="btn btn-inverse btn-small" data-toggle="modal" href="#ThemeRewards"  ng-cloak>Theme Rewards</button>                 
                <button class="btn btn-inverse btn-small" ng-click="listchallenge()" ng-cloak>Refresh</button>                 
                <table class="table table-striped">
                  <thead>
                    <th>
                      Challenge Name
                    </th>
                    <th>
                      Description
                    </th>
                    <th>
                      Admin Notes
                    </th>
                    <th>
                      Songs
                    </th>
                    <th>
                      Upload By
                    </th>
                    <th>
                      Expires
                    </th>
                    <th>
                      Action
                    </th>
                  </thead>
                  <tbody ui-if="!!challenges.entities.length">
                    <tr ng-repeat="chal in challenges.entities">
                      <td>
                        {{chal.c_name}}
                      </td>
                      <td>
                        {{chal.c_desc}}
                      </td>
                      <td>
                        {{chal.c_notes}}
                      </td>
                      <td>
                        <div ui-if="!!chal.c_songs.length">
                            <ul>
                              <li ng-repeat="cs in chal.c_songs">
                                <img src="/file/serve/{{cs.s_blob}}" style="width: 100px">
                                <span>{{cs.s_name}} ({{cs.s_difficulty}})</span>
                              </li>
                            </ul>
                        </div>
                      </td>
                      <td>
                        {{chal.c_uploadby}}
                      </td>
                      <td ng-hide="expireChallenge(chal)">
                        {{chal.c_date}}
                      </td>
                      <td ng-show="expireChallenge(chal)">
                        Expired
                      </td>
                      <td>
                        <form ng-submit="deletechallenge({{chal.id}})">
                          <input class="btn btn-inverse btn-small" type="submit" name="Delete" value="Delete">
                        </form>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <div class="modal hide fade" id="CreateChallenge" style="display:none">
                  <div class="modal-header">
                    <input type="submit" class="close" ng-click="cancelchallenge()" value="x" data-dismiss="modal"/>
                    <h3 id="Login">Create Challenge</h3>
                  </div>
                  <div class="modal-body">
                    <input type="hidden" ng-model="challenge.data.c_uploadby">
                    <div class="control-group">
                      <label class="control-label" for="ChalName">Challenge Name:</label>
                      <div class="controls">
                        <input type="text" ng-model="challenge.data.c_name"/>
                      </div>
                      <label class="control-label" for="ChalDesc">Description</label>
                      <div class="controls">
                        <textarea style="width: 250px; height: 35px; resize: none;" ng-model="challenge.data.c_desc"></textarea>
                      </div>
                      <label class="control-label" for="ChalNotes">Admin Notes</label>
                      <div class="controls">
                        <textarea style="width: 250px; height: 35px; resize: none;" ng-model="challenge.data.c_notes"></textarea>
                      </div>
                      <label class="control-label" for="ChalSongs">Songs</label>
                      <div class="controls">
                        <div ui-if="!!challenge.data.c_songs.length">
                            <ul>
                              <li ng-repeat="songdata in challenge.data.c_songs">
                                <span>{{songdata.s_name}} ({{songdata.s_difficulty}})</span>
                              </li>
                            </ul>
                        </div>
                        <select ng-model="c_song.s_name" ng-options="songselect.s_name as songselect.s_name for songselect in songs_summary.entities"></select>
                        <select ng-model="c_song.s_difficulty">
                          <option value="BSC" selected>BSC (Basic)</option>
                          <option value="ADV">ADV (Advanced)</option>
                          <option value="EXT">EXT (Extreme)</option>
                        </select>
                        <button class="btn btn-inverse btn-small" ng-click="addsongtochallenge()">Add</button> 
                      </div>
                      <label class="control-label" for="ChalExpires">Expires</label>
                      <div class="controls">
                        <input ui-date ui-date-format ng-model="challenge.data.c_date"></input><br/> 
                        (All challenges expire at 2300 hrs (+0800) on the given date.)
                      </div>
                      <div class="controls">
                        <input type="submit" ng-click="addchallenge()" value="Submit" data-dismiss="modal"/>
                        <input type="submit" ng-click="cancelchallenge()" value="Cancel" data-dismiss="modal"/>
                      </div>
                    </div>			
                  </div>
                  <div class="modal-footer">
                  </div>
                </div>

                <div class="modal hide fade" id="ScoreChallenge" style="display:none">
                  <div class="modal-header">
                    <input type="submit" class="close" ng-click="cancelscoring()" value="x" data-dismiss="modal"/>
                    <h3 id="Login">Score Challenge</h3>
                  </div>
                  <div class="modal-body">
                    <input type="hidden" ng-model="c_scoring.data.c_uploadby">
                    <div class="control-group">
                      <label class="control-label" for="ChalName">Challenge Name:</label>
                      <div class="controls">
                        <select ng-model="c_scoring.data.c_id" ng-options="chalselect.id as chalselect.c_name for chalselect in challenges.entities"></select> {{c_scoring.data.c_id}}
                      </div>
                      <label class="control-label" for="ChalDesc">Rankings</label>
                      <div class="controls">
                        <div ui-if="!!c_scoring.data.c_rankings.length">
                            <ul>
                              <li ng-repeat="rankingdata in c_scoring.data.c_rankings">
                                <span>{{rankingdata.u_earned}}: {{rankingdata.u_name}}</span>
                              </li>
                            </ul>
                        </div>
                        <select ng-model="c_ranking.u_name" ng-options="userselect.u_name as userselect.u_name for userselect in users.entities | filter:userIsNotAdmin"></select>
                        <select ng-model="c_ranking.u_earned">
                          <option value="1st" selected>1st Place (5 pts)</option>
                          <option value="2nd">2nd Place (3 pts)</option>
                          <option value="3rd">3rd Place (2 pts)</option>
                          <option value="Participation">Participation (1 pts)</option>
                        </select>
                        <button class="btn btn-inverse btn-small" ng-click="addrankingtoscoring()">Add</button>
                      </div>
                      <div class="controls">
                        <input type="submit" ng-click="submitscoring()" value="Submit" data-dismiss="modal"/>
                        <input type="submit" ng-click="cancelscoring()" value="Cancel" data-dismiss="modal"/>
                      </div>
                    </div>			
                  </div>
                  <div class="modal-footer">
                  </div>
                </div>


                <div class="modal hide fade" id="ThemeRewards" style="display:none">
                  <div class="modal-header">
                    <input type="submit" class="close" ng-click="cancelreward()" value="x" data-dismiss="modal"/>
                    <h3 id="Login">Theme Rewards</h3>
                  </div>
                  <div class="modal-body">
                    <input type="hidden" ng-model="t_scoring.data.t_scoreby">
                    <div class="control-group">
                      <label class="control-label" for="ChalName">Theme Name:</label>
                      <div class="controls">
                        <input ng-model="t_scoring.data.t_name"></input>
                      </div>
                      <label class="control-label" for="ChalDesc">Rewards</label>
                      <div class="controls">
                        <div ui-if="!!t_scoring.data.t_rewards.length">
                            <ul>
                              <li ng-repeat="rewarddata in t_scoring.data.t_rewards">
                                <span>{{rewarddata.u_earned}}: {{rewarddata.u_name}}</span>
                              </li>
                            </ul>
                        </div>
                        <select ng-model="t_reward.u_name" ng-options="userselect.u_name as userselect.u_name for userselect in users.entities"></select>
                        <select ng-model="t_reward.u_earned">
                          <option value="1st" selected>1st Place (3 pts)</option>
                          <option value="2nd">2nd Place (2 pts)</option>
                          <option value="3rd">3rd Place (1 pts)</option>
                        </select>
                        <button class="btn btn-inverse btn-small" ng-click="addrewardtotheme()">Add</button>
                      </div>
                      <div class="controls">
                        <input type="submit" ng-click="submitreward()" value="Submit" data-dismiss="modal"/>
                        <input type="submit" ng-click="cancelreward()" value="Cancel" data-dismiss="modal"/>
                      </div>
                    </div>			
                  </div>
                  <div class="modal-footer">
                  </div>
                </div>

                
              </div>
            </div>

            <!-- Manage Achievements Pane-->
            <div class="tab-pane" id="ManageAchievements" ui-if="isadmin">
              <div class="container-fluid">
                <button class="btn btn-inverse btn-small" ng-click="listachievementsusers()" ng-cloak>Refresh</button> 
                <button class="btn btn-inverse btn-small" data-toggle="modal" href="#CreateAchievement" ng-cloak>Add New Achievement</button>
                <button class="btn btn-inverse btn-small" data-toggle="modal" href="#AwardAchievement" ng-cloak>Award Achievement</button>                  
                <table class="table table-striped">
                  <thead>
                    <th>
                     <a href="" ng-click="predicate_achievements = 'a_name'; reverse=!reverse">Achievement Name</a>
                    </th>
                    <th>
                     <a href="" ng-click="predicate_achievements = 'a_points'; reverse=!reverse">Points Awarded</a>
                    </th>
                    <th width="70%">
                      Awarded To
                    </th>
                    <th>
                      Action
                    </th>
                  </thead>
                  <tbody ui-if="!!achievements.entities.length">
                    <tr ng-repeat="achievement in achievements.entities | orderBy:predicate_achievements:reverse">
                      <td>
                        {{achievement.a_name}}
                      </td>
                      <td>
                        {{achievement.a_points}}
                      </td>
                      <td>
                        <span class="badge" ng-repeat="award in achievementawards.entities | filter:{a_id : achievement.id}">
                        {{award.a_user}}
                        </span>
                      </td>
                      <td>
                          <form ng-submit="deleteachievement({{achievement.id}})">
                            <input class="btn btn-inverse btn-small" type="submit" name="Delete" value="Delete">
                          </form>
                      </td>
                    </tr>
                  </tbody>
                </table>
                
                <div class="modal hide fade" id="CreateAchievement" style="display:none">
                  <div class="modal-header">
                    <input type="submit" class="close" ng-click="cancelachievement()" value="x" data-dismiss="modal"/>
                    <h3 id="Login">Create Achievement</h3>
                  </div>
                  <div class="modal-body">
                    <input type="hidden" ng-model="achievement.data.a_uploadby">
                    <div class="control-group">
                      <label class="control-label" for="ChalName">Achievement Name</label>
                      <div class="controls">
                        <input type="text" ng-model="achievement.data.a_name"/>
                      </div>
                      <label class="control-label" for="ChalDesc">Achievement Points</label>
                      <div class="controls">
                        <select ng-model="achievement.data.a_points">
                          <option value="1" selected>1</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5</option>
                          <option value="6">6</option>
                          <option value="7">7</option>
                        </select>
                      </div>                        
                      <div class="controls">
                        <input type="submit" ng-click="addachievement()" value="Submit" data-dismiss="modal"/>
                        <input type="submit" ng-click="cancelachievement()" value="Cancel" data-dismiss="modal"/>
                      </div>
                    </div>			
                  </div>
                  <div class="modal-footer">
                  </div>
                </div>
            
                <div class="modal hide fade" id="AwardAchievement" style="display:none">
                      <div class="modal-header">
                        <input type="submit" class="close" ng-click="cancelaward()" value="x" data-dismiss="modal"/>
                        <h3 id="Login">Award Achievement</h3>
                      </div>
                      <div class="modal-body">
                        <input type="hidden" ng-model="awardachievement.data.a_uploadby">
                        <div class="control-group">
                          <label class="control-label" for="ChalDesc">Achievement</label>
                          <div class="controls">
                            <select ng-model="awardachievement.data.a_id" ng-options="achievement.id as achievement.a_name for achievement in achievements.entities"></select>
                          </div>                        
                          <label class="control-label" for="ChalDesc">User</label>
                          <div class="controls">
                            <select ng-model="awardachievement.data.a_user" ng-options="user.u_name as user.u_name for user in users.entities | filter:userIsNotAdmin"></select>
                          </div>
                          <div class="controls">
                            <input type="submit" ng-click="awardachievement()" value="Submit" data-dismiss="modal"/>
                            <input type="submit" ng-click="cancelaward()" value="Cancel" data-dismiss="modal"/>
                          </div>
                        </div>
                      </div>
                      <div class="modal-footer">
                      </div>
                 </div>                  
              </div>	 	          	
            </div>
            
            <!-- Manage Songs Pane -->
            <div class="tab-pane" id="ManageSongs" ui-if="isadmin">
              <div class="container-fluid">
                <div class="row-fluid">
                  <button class="btn btn-inverse btn-small" onclick="song_upload()" ng-cloak>Add New Song</button> 
                  <button class="btn btn-inverse btn-small" ng-click="listsongs()" ng-cloak>Refresh</button>
                  <span class="label" ui-if="(song_pagination.s_offset + song_pagination.s_limit <= songs.count)" ng-cloak>
                    (Song(s) {{song_pagination.s_offset + 1}} to {{song_pagination.s_offset + song_pagination.s_limit}} of {{songs.count}})
                  </span>
                  <span class="label"  ui-if="(song_pagination.s_offset + song_pagination.s_limit > songs.count)" ng-cloak>
                    (Song(s) {{song_pagination.s_offset + 1}} to {{songs.count}} of {{songs.count}})
                  </span>
                </div>
                <div class="row-fluid">
                  <div class="pagination">
                    <ul>
                      <li ng-repeat="page in song_pagination.s_pages" ng-cloak>
                        <a href="#" class="btn btn-inverse btn-small" ng-click="song_paginate(page.offset)" ui-if="!song_paginate_disable(page.offset)">
                          {{page.no}}
                        </a>
                        <a href="#" class="btn btn-inverse btn-small" disabled ui-if="song_paginate_disable(page.offset)">
                          {{page.no}}
                        </a>
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="row-fluid">
                  <table class="table table-striped">
                    <thead>
                      <th>
                        Image
                      </th>
                      <th>
                        Name
                      </th>
                      <th>
                        Composer
                      </th>
                      <th>
                        Details
                      </th>
                      <th>
                        Upload Date
                      </th>
                      <th>
                        Upload By
                      </th>
                      <th>
                        Action
                      </th>
                    </thead>
                    <tbody ui-if="!!songs.entities.length">
                      <tr ng-repeat="song in songs.entities">
                        <td>
                          <img src="/file/serve/{{song.s_blob}}" style="width: 100px">
                        </td>
                        <td>
                          {{song.s_name}}
                        </td>
                        <td>
                          {{song.s_comp}}
                        </td>
                        <td>
                          {{song.s_details}}
                        </td>
                        <td>
                          {{song.s_date}}
                        </td>
                        <td>
                          {{song.s_uploadby}}
                        </td>
                        <td>
                            <form ng-submit="deletesong({{song.id}})">
                              <input class="btn btn-inverse btn-small" type="submit" name="Delete" value="Delete">
                            </form>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="row-fluid">
                  <div class="pagination">
                    <ul>
                      <li ng-repeat="page in song_pagination.s_pages" ng-cloak>
                        <a href="#" class="btn btn-inverse btn-small" ng-click="song_paginate(page.offset)" ui-if="!song_paginate_disable(page.offset)">
                          {{page.no}}
                        </a>
                        <a href="#" class="btn btn-inverse btn-small" disabled ui-if="song_paginate_disable(page.offset)">
                          {{page.no}}
                        </a>
                      </li>
                    </ul>
                  </div> 
                </div>
              </div>	          	
            </div>
            
            <!-- View Submissions Pane -->
            <div class="tab-pane" id="ViewSubmissions" ui-if="isadmin">
              <div class="container-fluid">
                <button class="btn btn-inverse btn-small" ng-click="listsubmissions()" ng-cloak>Refresh</button>
                <button class="btn btn-inverse btn-small" ng-click="changeFilter()">Turn {{button}} Half-Time Filter</button>
                <table class="table table-striped">
                  <thead>
                    <th>
                      File
                    </th>
                    <th>
                     <a href="" ng-click="predicate_submissions = 'f_name'; reverse=!reverse">Name</a>
                    </th>
                    <th>
                     <a href="" ng-click="predicate_submissions = 'f_purpose'; reverse=!reverse">Purpose</a>
                    </th>
                    <th>
                     <a href="" ng-click="predicate_submissions = 'f_desc'; reverse=!reverse">Description</a>
                    </th>
                    <th>
                     <a href="" ng-click="predicate_submissions = 'f_owner'; reverse=!reverse">Owner</a>
                    </th>
                    <th>
                     <a href="" ng-click="predicate_submissions = 'f_date'; reverse=!reverse">Date</a>
                    </th>
                    <th>
                      Action
                    </th>
                  </thead>
                  <tbody ui-if="!!blobfiles.entities.length" >
                    <tr ng-repeat="file in blobfiles.entities | orderBy:predicate_submissions:reverse | filter:filter">
                      <td>
                        <a href="/file/serve/{{file.f_blob}}" target="_blank">View</a>
                      </td>
                      <td>
                        {{file.f_name}}
                      </td>
                      <td>
                        {{file.f_purpose}}
                      </td>
                      <td>
                        {{file.f_desc}}
                      </td>
                      <td>
                        {{file.f_owner}}
                      </td>
                      <td>
                        {{file.f_date}}
                      </td>
                      <td>
                          <form ng-submit="deletesubmission({{file.id}})">
                            <input type="submit" class="btn btn-inverse btn-small" name="Delete" value="Delete">
                          </form>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>	  
            </div>

                          
            <!-- View Logs Pane -->
            <div class="tab-pane" id="ViewLogs" ui-if="isadmin">
              <div class="container-fluid">
                <button class="btn btn-inverse btn-small" ng-click="listlogs()" ng-cloak>Refresh</button> 
                <table class="table table-striped">
                  <thead>
                    <th>
                      Date
                    </th>
                    <th>
                      Activity
                    </th>
                  </thead>
                  <tbody ui-if="!!logs.entities.length">
                    <tr ng-repeat="log in logs.entities">
                      <td>
                        {{log.l_date}}
                      </td>
                      <td>
                        {{log.l_msg}}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>	 	        	
            </div>

          </div>
        </div><!--/span-->	        
      </div><!--/row-->
      
      <br/>
      <footer>
        <p class="muted credit">&copy; {{company}} 2013</p>
      </footer>
    </div><!--/.fluid-container-->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery.js"></script>
    <script src="js/jquery-ui-1.10.2.custom.min.js"></script>
    <script src="lib/angular/angular.min.js"></script>
    <script src="lib/angular/angular-ui.min.js"></script>
    <script src="lib/angular/angular-resource.min.js"></script>
    <script src="lib/angular/localStorageModule.js"></script>
    <script src="js/app.js"></script>
    <script src="js/controllers.js"></script>
    <script src="../test/lib/angular/angular-mocks.js"></script>
    <script src="js/bootstrap-transition.js"></script>
    <script src="js/bootstrap-alert.js"></script>
    <script src="js/bootstrap-modal.js"></script>
    <script src="js/bootstrap-dropdown.js"></script>
    <script src="js/bootstrap-scrollspy.js"></script>
    <script src="js/bootstrap-tab.js"></script>
    <script src="js/bootstrap-tooltip.js"></script>
    <script src="js/bootstrap-popover.js"></script>
    <script src="js/bootstrap-button.js"></script>
    <script src="js/bootstrap-collapse.js"></script>
    <script src="js/bootstrap-carousel.js"></script>
    <script src="js/bootstrap-typeahead.js"></script>

    <script type="text/javascript">
    setTimeout(function(){var a=document.createElement("script");
    var b=document.getElementsByTagName("script")[0];
    a.src=document.location.protocol+"//dnn506yrbagrg.cloudfront.net/pages/scripts/0016/4350.js?"+Math.floor(new Date().getTime()/3600000);
    a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
    </script>
  </body>
</html>
